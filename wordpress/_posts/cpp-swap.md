title: 不用中间变量实现交换过程
tags:
  - 中间变量
  - 交换
  - 算法
id: 424
categories:
  - 算法/数据结构
date: 2013-01-14 21:11:29
---

**传统的交换**是采用的中间变量的实现。

实现过程如下：

定义中间变量 t , 要交换的两个元素分别为 a,b。

t = a;

a = b;

b = t;

这样在工程中，**额外**使用了一个变量 t。基于这样一种**倒墨水式算法**（交换AB两瓶中墨的方法），是不能避免使用一个中间变量的。但是在现实中，当你遇到墨水装错瓶子的时候，我相信你会更情愿直接交换两个墨水瓶的标签，而不是三个瓶子倒来倒去。当然我们不可能在程序中采用这种方法。但倒墨水式的算法并**不是**解决交换问题的**唯一**算法，这是我们需要明确的（数学是伟大的）。

下面介绍一种不使用中间变量的交换方法（假设要交换元素分别为a,b）：

*   a ← a+b
*   b ← a-b
*   a ← a-b
使用程序，验证一下

[code lang="cpp"]
#include&lt;stdio.h&gt;
int main(void)
{
    int a=2,b=3;
    a = a+b;
    b = a-b;
    a = a-b;
    printf(&quot;a=%d,b=%d\n&quot;,a,b);
    return 0;
}
[/code]

输出结果为：

**<span style="color: #ff6600;">a=3,b=2</span>**

可见交换**成功**了。

分析它的实现过程，进行推广得知

t = fun(x,y)是二元**原函数**

f1(t,x)和f2(t,y)是它的两个**反函数**

那么存在以下三个关系：

t = fun(x,y)

x = f1(t,y)

y = f2(t,x)

省去中间变量t，可以得知以下三个表达式即可完成交换（C语言描述，其中 fun是原函数，f1,f2是它的两个反函数）

**x = fun(x,y);**

**y = f1(t,y);**

**x = f2(t,x);**

按照这个推广的结论，乘除，平方开方也能够完成一部分交换，之所以说他们只能完成一部分交换，因为除法运算的定义域不是R，开方运算的定义域也不是R）。所以乘法和平方在这个算法中都不是一个好的原函数。其中对于整型数来说，最为理想的原函数应该是异或运算，因为异或运算的反函数是它本身。

那我们来看看，使用异或的交换

[code lang="cpp"]
#include &lt;stdio.h&gt;
int main(void)
{
    int a=2,b=3;
    a ^= b;
    b ^= a;
    a ^= b;
    printf(&quot;a=%d,b=%d\n&quot;,a,b);
    return 0;
}
[/code]

输出结果为：

**<span style="color: #ff6600;">a=3,b=2</span>**

可见交换**成功**了。

因为异或的特性，在不使用中间变量的交换中，我们**通常**使用它作为原函数。

[warning]
作者:Aem
本文版权归作者和www.aemiot.com共有，未征得作者本人同意之前，请勿将本文内容用于任何商业用途。 欢迎非商业用途转载，但请在明显位置注明本文作者和出处链接，否则我们保留追究法律责任的权利。
[/warning]