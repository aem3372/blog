title: 浅谈C和C++产生的误会
tags:
  - c
id: 178
categories:
  - 经验之谈
date: 2012-12-25 04:52:17
---

经常在网上看到有人说先学C++再学C语言会感觉更加容易，先学C再学C++会很难。
其实这是个天大的误会
因为，许多人觉得C++的语法包含了C语言的语法，C++是C语言的升级版，但是，<span style="color: #3366ff;">C和C++只是表面上看起来像而已</span>，如果你把它们语法弄混淆，也许你暂时不会发现有什么异常，但是等到程序出现问题的时候，就无从下手了。<!--more-->

这里列举几个我在学习C和C++过程中，发现它们在细节上的不同（这里C语言采用ANSI C89标准）

&nbsp;

1.  <span style="color: #3366ff;">**const 在C和C++中不同。**</span>
在C中默认使用外部链接，并且分配内存，别的文件是可见的
在C++中默认使用内部链接，默认不分配内存，对其他文件不可见，有点类似#define，但它会做一个类型检查，因此比#define更加安全
若要使该常量对其他文件可见，使用外部链接，那么就要之前加上extern，不过代价就是要分配内存
这样做的原因是为了使const可以用于头文件中，在头文件中使用const int s=4;是可以的，注意这时不用extern;  因为它的作用域是到文件结尾。。那么就不会出现重复定义现象。
2.  <span style="color: #3366ff;">**赋值号的返回内容不同。**</span>
C中赋值运算符返回的是一个右值。例如， (a += b) -= 4 这样的表达式就是非法的C表达式，至少会给出警告，严重点的直接无法编译。
C++中赋值运算符返回的是一个左值。例如，（a += b） -= 4 这样的表达式是合法的，甚至 (a = 4) = 1 这样的表达式也是一个合法的C++表达式。
3.  <span style="color: #3366ff;">**全局变量的初始化不同。**</span>
C语言对全局变量的初始化只能是常量表达式。
C++定义全局变量的时候可以使用已经声明过的全局变量。
4.  <span style="color: #3366ff;">**ANSI C89 规定程序的声明要在程序块的最开始处，ANSI C99和C++对这一点放宽了要求，即可以再程序的任何地方声明。**</span>
（其余的就留给大家自行探究吧。）

可想而知，将C++的语法当C语言的语法是一件多么可怕的事情。

事实上，将它们当做两门不同的语言会更加容易学习。

如果你能把他们当做两门完全不同的语言去学习（不要总去想它们的联系），不论怎么样的顺序，学习它们都是好的，不过C++更加重视的是面向对象，而不是语法。

&nbsp;

另外一个误会就是，许多人认为C++比C更加高级。

虽然，C++多C在名字上看起来更加霸气一些，但不可否认，<span style="color: #3366ff;">C跟C++确实是各有所长</span>。

<span style="color: #3366ff;">C++是大型编程语言</span>，所以引入了类，模板等面向对象元素，这样做使得代码更加有条理性，更加符合现实世界的法则，而不用处处考虑越界之类的问题。但因此在程序运行效率上处于劣势。

<span style="color: #3366ff;">C是底层语言</span>，它对硬件直接的通信有很好的可控性，并且有很高的运行效率，所以它在硬件编程上广泛应用。

而且，在编程语言排行榜上，C 的排名一直高于C++ ，而且随着近年来物流网的高速发展，对硬件编程需求增加，C 的使用率还将继续上升。

所以<span style="color: #3366ff;">C++ 并不比 C 更高级，他们只是在各有所长</span>，就如同其他语言一样，都有着自己擅长的领域，例如 python在计算方面是有着非常大的优势的。

[note title="2015/5有感"]
经过数年的时间，回过头来看看这篇浅谈，觉得有点贻笑大方，C++与C之间的差异远远不止这些停留在语法细节上的东西，包括适合的编程范式等在设计哲学上都是有很大差异的。
[/note]

[warning]
作者:**Aem**
本文版权归作者和www.aemiot.com共有，未征得作者本人同意之前，请勿将本文内容用于任何商业用途。 欢迎非商业用途转载，但请在明显位置注明本文作者和出处链接，否则我们保留追究法律责任的权利。
[/warning]